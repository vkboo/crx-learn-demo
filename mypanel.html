<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Panel html</title>
</head>

<body>
    <ul>
        <li>
            <span id="check_jquery">
                检测当前页面jQuery
            </span>
        </li>
        <li>
            <span id="open_resource">
                查看当前页面HTML代码的第20行
            </span>
        </li>
        <li>
            <span id="test_inspect">
                审查页面第一张图片
            </span>
        </li>
        <li>
            <span id="get_all_resources">
                获取当前页面所有Resources
            </span>
        </li>
    </ul>

    <script>

        document.getElementById('check_jquery').addEventListener('click', function () {
            // 访问被检查的页面DOM需要使用inspectedWindow
            // 简单例子：检测被检查页面是否使用了jQuery
            chrome.devtools.inspectedWindow.eval("jQuery.fn.jquery", function (result, isException) {
                var html = '';
                if (isException) html = '当前页面没有使用jQuery。';
                else html = '当前页面使用了jQuery，版本为：' + result;
                alert(html);
            });
        });

        // 打开某个资源
        document.getElementById('open_resource').addEventListener('click', function () {
            chrome.devtools.inspectedWindow.eval("window.location.href", function (result, isException) {
                chrome.devtools.panels.openResource(result, 20, function () {
                    console.log('资源打开成功！');
                });
            });
        });

        // 审查元素
        document.getElementById('test_inspect').addEventListener('click', function () {
            chrome.devtools.inspectedWindow.eval("inspect(document.images[0])", function (result, isException) { });
        });

        // 获取所有资源
        document.getElementById('get_all_resources').addEventListener('click', function () {
            chrome.devtools.inspectedWindow.getResources(function (resources) {
                alert(JSON.stringify(resources));
            });
        });

    </script>
</body>

</html>